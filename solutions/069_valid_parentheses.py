# 力扣 热题100 · 第69题 有效的括号
# 链接: https://leetcode.cn/problems/valid-parentheses/
#
# ---------- 思路 ----------
# 题目在问什么：字符串只含 '()[]{}'，判断括号是否一一匹配且正确嵌套。
#
# 做法：用栈。遇到左括号就压栈；遇到右括号看栈顶是否与之匹配的左括号，匹配就弹栈，不匹配或栈空就无效。最后栈空才有效。
#
# ---------- 关键点 ----------
# · 括号匹配的规则：每个右括号必须和「它左边最近的、还没被匹配掉的左括号」配对。比如 "([])"，第一个 ')' 只能和离它最近的 '(' 配。这种「最近」正好用栈：遇到左括号就压栈，遇到右括号就看栈顶是不是对应的左括号——是就弹栈（表示配对成功），不是或栈空就说明无效。最后若栈空了，说明每个左括号都被配对掉了，序列才有效。

class Solution:
    def isValid(self, s: str) -> bool:
        stack = []
        pair = {")": "(", "]": "[", "}": "{"}
        for c in s:
            if c in pair:
                if not stack or stack[-1] != pair[c]:
                    return False
                stack.pop()
            else:
                stack.append(c)
        return len(stack) == 0
